<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Display Visualization</title>
    <style>
        body {
            background-color: #2c3e50;
            margin: 0;
            overflow: hidden;
        }
        #visualization-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #34495e;
        }
        .circle {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #e74c3c;
            transform: translate(-50%, -50%);
            transition: all 0.1s ease-out;
        }
    </style>
</head>
<body>
    <div id="visualization-container">
        <div class="circle" id="coord-circle"></div>
    </div>

    <script>
        const circle = document.getElementById('coord-circle');
        const container = document.getElementById('visualization-container');

        function updateCoordinates() {
            fetch('/get_coordinates')
                .then(response => response.json())
                .then(data => {
                    if (data && data.x !== null && data.y !== null) {
                        // 현재 브라우저 창의 크기 가져오기
                        const containerWidth = container.offsetWidth;
                        const containerHeight = container.offsetHeight;
                        
                        // 정규화된 좌표를 픽셀 좌표로 변환
                        const pixelX = data.x * containerWidth;
                        const pixelY = data.y * containerHeight;

                        // 원의 위치 업데이트
                        circle.style.left = pixelX + 'px';
                        circle.style.top = pixelY + 'px';
                        circle.style.display = 'block';
                        // // 원의 색상을 랜덤하게 변경
                        // const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f1c40f', '#9b59b6'];
                        // const randomColor = colors[Math.floor(Math.random() * colors.length)];
                        // circle.style.backgroundColor = randomColor;
                    }
                })
                .catch(error => console.error('Error fetching coordinates:', error));
        }

        // 100밀리초(0.1초)마다 updateCoordinates 함수 실행
        setInterval(updateCoordinates, 100);
    </script>
</body>
</html>